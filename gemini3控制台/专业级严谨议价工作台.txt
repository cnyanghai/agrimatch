<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>合同条款议定工作台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f8fafc;
            color: #1e293b;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th {
            @apply bg-slate-50 text-slate-500 font-semibold text-xs uppercase tracking-wider py-3 px-4 border-b border-slate-200 text-left;
        }

        .comparison-table td {
            @apply py-4 px-4 border-b border-slate-100 align-middle;
        }

        .row-label {
            @apply font-medium text-slate-700 w-48 bg-slate-50/50;
        }

        .current-value {
            @apply text-slate-400 w-1/3 italic;
        }

        .negotiable-input {
            @apply w-full border border-slate-200 rounded px-3 py-2 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all;
        }

        .diff-indicator {
            @apply text-[11px] font-mono mt-1;
        }

        .summary-bar {
            @apply fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-8 py-4 flex justify-between items-center shadow-lg z-50;
        }
    </style>
</head>
<body class="pb-24">

    <!-- 顶部导航 -->
    <header class="h-14 bg-white border-b border-slate-200 flex items-center justify-between px-6">
        <div class="flex items-center gap-3">
            <span class="text-blue-600 font-bold text-xl">AgriMatch</span>
            <span class="text-slate-300">|</span>
            <span class="text-sm font-medium text-slate-600">议价修改方案 - 订单号: #PO-2025123001</span>
        </div>
        <div class="flex items-center gap-4 text-xs">
            <span class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-green-500"></span> 交易对手: 北方粮油贸易有限公司</span>
        </div>
    </header>

    <main class="max-w-6xl mx-auto mt-8 px-6">
        <!-- 核心对比区 -->
        <div class="bg-white border border-slate-200 rounded-sm shadow-sm overflow-hidden">
            <div class="p-4 border-b border-slate-200 bg-white">
                <h2 class="text-base font-bold text-slate-800">合同条款修订对比</h2>
            </div>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th class="row-label">条款项目</th>
                        <th class="current-value">当前合同条款 (只读)</th>
                        <th>我的修订提议 (可编辑)</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 价格 -->
                    <tr>
                        <td class="row-label">单价 (CNY/吨)</td>
                        <td class="current-value">2,450.00</td>
                        <td>
                            <input type="number" id="price" value="2380" oninput="updateCalculations()" class="negotiable-input font-bold text-blue-600">
                            <div id="priceDiff" class="diff-indicator text-red-500">↓ -70.00 (-2.8%)</div>
                        </td>
                    </tr>
                    <!-- 数量 -->
                    <tr>
                        <td class="row-label">采购总量 (吨)</td>
                        <td class="current-value">500.00</td>
                        <td>
                            <input type="number" id="qty" value="500" oninput="updateCalculations()" class="negotiable-input">
                            <div id="qtyDiff" class="diff-indicator text-slate-400">无变动</div>
                        </td>
                    </tr>
                    <!-- 水分 -->
                    <tr>
                        <td class="row-label">水分含量标准 (≤)</td>
                        <td class="current-value">13.0%</td>
                        <td>
                            <select id="water" onchange="updateCalculations()" class="negotiable-input">
                                <option value="13.0">13.0% (标准)</option>
                                <option value="14.0">14.0% (放宽)</option>
                                <option value="15.0" selected>15.0% (显著放宽)</option>
                            </select>
                            <div class="diff-indicator text-green-600">↑ 对卖方有利</div>
                        </td>
                    </tr>
                    <!-- 结算方式 -->
                    <tr>
                        <td class="row-label">结算方式</td>
                        <td class="current-value">全额预付</td>
                        <td>
                            <select class="negotiable-input">
                                <option>全额预付</option>
                                <option selected>货到验收即付 (95%)</option>
                                <option>信用账期 (30天)</option>
                            </select>
                        </td>
                    </tr>
                    <!-- 运输承担 -->
                    <tr>
                        <td class="row-label">运输承担方</td>
                        <td class="current-value">买方自提</td>
                        <td>
                            <div class="flex gap-4 mt-1">
                                <label class="flex items-center gap-2 text-sm text-slate-600">
                                    <input type="radio" name="delivery" checked> 卖方送货
                                </label>
                                <label class="flex items-center gap-2 text-sm text-slate-600">
                                    <input type="radio" name="delivery"> 买方自提
                                </label>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- 备注区 -->
            <div class="p-6 bg-slate-50 border-t border-slate-200">
                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">修订说明 (私信给对方)</label>
                <textarea class="w-full border border-slate-200 rounded p-3 text-sm h-24 focus:ring-1 focus:ring-blue-500 outline-none" placeholder="例如：鉴于我方放宽了水分要求，希望单价能下调至2380元..."></textarea>
            </div>
        </div>

        <!-- 历史记录（极简折叠式） -->
        <div class="mt-8 mb-12">
            <h3 class="text-sm font-bold text-slate-500 flex items-center gap-2 mb-4">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                最近协商记录
            </h3>
            <div class="space-y-2">
                <div class="flex justify-between items-center bg-white p-3 border border-slate-200 rounded text-xs">
                    <span class="text-slate-500">2025-12-30 14:20</span>
                    <span class="font-medium text-slate-700">对方（卖家）拒绝了您的上一轮出价</span>
                    <button class="text-blue-600 hover:underline">查看详情</button>
                </div>
                <div class="flex justify-between items-center bg-white p-3 border border-slate-200 rounded text-xs opacity-60">
                    <span class="text-slate-500">2025-12-30 11:00</span>
                    <span class="font-medium text-slate-700">您发送了初始报价 ¥2,450.00</span>
                    <button class="text-blue-600 hover:underline">查看详情</button>
                </div>
            </div>
        </div>
    </main>

    <!-- 底部状态汇总栏 -->
    <footer class="summary-bar">
        <div class="flex gap-12">
            <div>
                <p class="text-[10px] font-bold text-slate-400 uppercase">当前合同总额</p>
                <p class="text-lg font-mono font-bold text-slate-900">¥ 1,225,000.00</p>
            </div>
            <div class="border-l border-slate-200 pl-8">
                <p class="text-[10px] font-bold text-slate-400 uppercase">修订后预估总额</p>
                <p id="newTotal" class="text-lg font-mono font-bold text-blue-600">¥ 1,190,000.00</p>
            </div>
            <div class="border-l border-slate-200 pl-8">
                <p class="text-[10px] font-bold text-slate-400 uppercase">总额差异</p>
                <p id="totalDiff" class="text-lg font-mono font-bold text-red-500">- ¥ 35,000.00</p>
            </div>
        </div>
        <div class="flex gap-3">
            <button class="px-6 py-2 border border-slate-300 rounded text-sm font-medium text-slate-600 hover:bg-slate-50">存为草稿</button>
            <button class="px-8 py-2 bg-blue-600 text-white rounded text-sm font-bold hover:bg-blue-700 shadow-sm transition-colors">提交修订提议</button>
        </div>
    </footer>

    <script>
        const ORIGINAL = {
            price: 2450,
            qty: 500
        };

        function updateCalculations() {
            const price = parseFloat(document.getElementById('price').value) || 0;
            const qty = parseFloat(document.getElementById('qty').value) || 0;

            const originalTotal = ORIGINAL.price * ORIGINAL.qty;
            const newTotal = price * qty;
            const totalDiff = newTotal - originalTotal;
            const priceDiff = price - ORIGINAL.price;
            const priceDiffPct = ((priceDiff / ORIGINAL.price) * 100).toFixed(1);

            // 更新差异文本
            const priceDiffEl = document.getElementById('priceDiff');
            if (priceDiff === 0) {
                priceDiffEl.innerText = '无变动';
                priceDiffEl.className = 'diff-indicator text-slate-400';
            } else {
                priceDiffEl.innerText = `${priceDiff > 0 ? '↑' : '↓'} ${priceDiff.toFixed(2)} (${priceDiffPct}%)`;
                priceDiffEl.className = `diff-indicator ${priceDiff > 0 ? 'text-green-600' : 'text-red-500'}`;
            }

            // 更新汇总
            document.getElementById('newTotal').innerText = `¥ ${newTotal.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
            document.getElementById('totalDiff').innerText = `${totalDiff >= 0 ? '+' : '-'} ¥ ${Math.abs(totalDiff).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
            document.getElementById('totalDiff').className = `text-lg font-mono font-bold ${totalDiff >= 0 ? 'text-green-600' : 'text-red-500'}`;
        }

        // 初始化
        updateCalculations();
    </script>
</body>
</html>